---
copyright:
  years: 2014, 2018
lastupdated: "2018-02-21"
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 规划 SSL

开始使用 SSL 时需要进行一些规划。请完成以下先决条件。

1. 决定在何处获取证书
2. 了解证书类型、密钥长度和持续时间
3. 选择通用名称
4. 了解套接字规则
5. 生成 CSR

## 决定在何处获取证书

可以在组织内部或从认证中心（如 Verisign、RapidSSL、Thawte 和其他）获取 SSL 证书。  

对于受控体系结构中的小型组（例如，使用内部网站点的员工），您可以获取每个员工在其浏览器中安装的自签名证书。您还可以设置自己的本地认证中心，以生成在组织中使用的证书。

对于较大型的各种组，使用来自标准源的 SSL 证书允许访问而无需专门配置。现代 Web 浏览器配置为信任由认证中心颁发的 SSL 证书。

## 了解证书类型、密钥长度和持续时间

在您决定获取证书的位置后，请复查以下用于证书类型的选项及其相应的可用性、密钥长度和持续时间。

|              证书类型|  可用性|  密钥长度|  持续时间|
| --------------------------------------- | --------------------------------- | -------------------------- | -------------------------- |
|域验证 (DV)| 快速可用| 1024 位或 2048 位| 1 年或 2 年|
|组织验证 (OV)| 2-3 天或最多一周| 1024 位或 2048 位| 1 年或 2 年|
|扩展验证 (EV)| 2-3 天或最多一周| 仅 2048 位| 1 年或 2 年|
{: caption="表 1. 证书类型" caption-side="top"}   


## 选择通用名称

证书中使用的通用名称是 Web 站点的主机名。证书的主机名和通用名称必须匹配，否则浏览器将发出警告。如果您的站点是 web1.mydomain.com，请将其用作通用名称。如果您还使用 images.mydomain.com，那么您需要通配符证书（在 {{site.data.keyword.cloud}} 中不可用），或者需要设置多个证书。如果选择了错误的通用名称，那么可以执行一些步骤来修正证书订单或撤销并以正确的通用名称重新发出。  

## 了解套接字规则

每个套接字只能有一个证书。套接字是 IP 地址和端口的组合，如 1.2.3.4:443。1.2.3.4:444 是不同的套接字。对于 SMTP/POP3 或 FTP 这样的应用程序，这并不重要。但是，对于 HTTP 却非常重要，因为它涉及虚拟主管。

虚拟主管是您可以在一个 IP 地址上托管 20、30 和 100 个 Web 站点的方法。这种方法之所以有效是因为现代浏览器将一个称为主机阅读器的字段作为其请求的一部分传递。此字段类似于“Host: web1.mydomain.com”，并告知 Web 服务器您正在尝试访问哪个站点。对于 HTTPS（基于 SSL 的 HTTP），Web 服务器必须选择要在查看主机头之前发送到客户机的 SSL 证书，这就是为什么给定的套接字只能有一个证书的原因。

您可以将每个启用 SSL 的 Web 站点分配给其自己的套接字。可以通过更改 IP 地址或更改端口来完成此操作。请记住，如果您将此端口从 443/tcp 更改为其他值，那么用户需要在其 URL 中包含该端口号，如 https://web1.mydomain.com:444。

## 生成 CSR

您可以通过在 Web 服务器上使用软件来生成证书签名请求。对于 UNIX 系统，请使用 OpenSSL 软件包。对于 Windows，有一个向导，可从 IIS 管理器中的 Web 站点属性的“目录安全性”选项卡访问该向导。如果正在使用控制面板，请参阅该控制面板的特定信息。

生成 CSR 时，您将创建专用密钥。请勿丢失、删除或共享专用密钥。请在 Web 服务器上私密保有该密钥。某些 CSR 生成实用程序还使您能够为专用密钥创建口令。除非您计划在 Web 服务器软件重新启动时随时登录服务器，否则请勿执行此操作。此外，请勿向 CSR 应用质询短语。

