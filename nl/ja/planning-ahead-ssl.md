---
copyright:
  years: 2014, 2018
lastupdated: "2018-05-16"
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# SSL の計画

SSL を開始するには、多少の計画が必要です。 以下の前提条件を完了してください。

1. 証明書を取得する場所を決定する
2. 証明書のタイプ、鍵の長さ、および期間について学習する
3. 共通名を選択する
4. ソケット・ルールについて学習する
5. CSR を生成する

## 証明書を取得する場所を決定する

SSL 証明書は、組織内で取得することも、Verisign、RapidSSL、Thawte などの認証局から取得することもできます。  

制御されたアーキテクチャー内の小規模なグループ (例えば、イントラネット・サイトを使用している従業員) の場合、自己署名証明書を獲得して、各従業員が自分のブラウザーにインストールすることができます。また、独自のローカル認証局をセットアップして、組織内で使用するための証明書を生成することもできます。

より大規模で多様なグループの場合、標準ソースからの SSL 証明書を使用することにより、特別な構成なしにアクセスが可能となります。 最新の Web ブラウザーは、認証局によって発行された SSL 証明書を信頼するように構成されています。

## 証明書のタイプ、鍵の長さ、および期間について学習する

証明書を取得する場所を決定した後、証明書のタイプおよび対応する可用性、鍵の長さ、および期間に関する以下のオプションを検討します。

| 証明書のタイプ | 可用性 | 鍵の長さ | 期間 |
| --------------------------------------- | --------------------------------- | -------------------------- | -------------------------- |
|ドメイン検証 (DV)                   | すぐに使用可能 | 1024 ビットまたは 2048 ビット | 1 年または 2 年 |
|組織検証 (OV)             | 2 日から 3 日、または最大 1 週間 | 1024 ビットまたは 2048 ビット | 1 年または 2 年 |
|拡張検証 (EV)                 | 2 日から 3 日、または最大 1 週間 | 2048 ビットのみ | 1 年または 2 年 |
{: caption="表 1. 証明書のタイプ" caption-side="top"}   


## 共通名を選択する

証明書に使用される共通名は、Web サイトのホスト名です。ホスト名と証明書の共通名が一致している必要があります。一致していなければ、ブラウザーは警告を出します。サイトが web1.mydomain.com の場合、それを共通名にします。 images.mydomain.com も使用している場合は、ワイルドカード証明書 ({{site.data.keyword.cloud}} からは入手できません) を使用するか、複数の証明書をセットアップする必要があります。 間違った共通名を選択した場合、証明書の注文を修正したり、取り消して正しい共通名で再発行したりするために実行できる手順が用意されています。  

## ソケット・ルールについて学習する

SSL 証明書は、1 つのソケットにつき 1 つの証明書という制限があります。ソケットは、IP アドレスとポートの組み合わせで、例えば、1.2.3.4:443 です (1.2.3.4:444 は別のソケットになります)。SMTP/POP3 や FTP のようなアプリケーションでは、ソケットの規則は問題ではありません。しかし、HTTP の場合は、仮想ホスティングとのかかわりがあるため、これは重要です。

仮想ホスティングは、1 つの IP アドレスで 20、30、100 の Web サイトをホストできる方式です。 仮想ホストが機能するのは、最新のブラウザーは要求の一部としてホスト・リーダーと呼ばれるフィールドを渡すからです。このフィールドは「Host: web1.mydomain.com」のように表示され、ユーザーがどのサイトにアクセスしようとしているのかを Web サーバーに伝えます。 HTTPS (HTTP over SSL) の場合、Web サーバーは、ホスト・ヘッダーを確認する前に、クライアントに送信する SSL 証明書を選択する必要があります。これが、1 つのソケットは 1 つの証明書しか持てない理由です。

各 SSL 対応 Web サイトを独自のソケットに割り当てるには、IP アドレスを変更するか、ポートを変更します。ポートを 443/tcp から変更した場合、ユーザーは、https://web1.mydomain.com:444 のように、URL にポート番号を含める必要があることに留意してください。

## CSR を生成する

Web サーバー上のソフトウェアを使用して、証明書署名要求を生成できます。 UNIX システムの場合は、OpenSSL パッケージを使用します。 Windows の場合は、IIS マネージャーの Web サイト・プロパティーの「ディレクトリ セキュリティ」タブからアクセスできるウィザードがあります。コントロール・パネルを使用している場合は、そのコントロール・パネルに固有の情報を参照してください。

CSR の生成中に、秘密鍵を作成します。秘密鍵は、紛失したり、削除したり、共有したりしないようにしてください。 これは Web サーバー上で非公開にする必要があります。 一部の CSR 生成ユーティリティーでは、秘密鍵のパスフレーズを作成する機能も提供されます。 Web サーバー・ソフトウェアが再始動したときはいつでもサーバーにログオンする計画でない限り、これを行わないでください。 また、CSR にチャレンジ用の語句も適用しないでください。

